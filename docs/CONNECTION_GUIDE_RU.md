# üìñ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é Frontend –∫ Backend API

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

Frontend —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ Backend API! –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

### –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:

1. ‚úÖ **API –∫–ª–∏–µ–Ω—Ç** –Ω–∞ –±–∞–∑–µ axios —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Ç–æ–∫–µ–Ω–æ–≤
2. ‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - –≤—Ö–æ–¥ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ API
3. ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç—ã** - –∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏–∑ API
4. ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏
5. ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
6. ‚úÖ **–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã** - –∫–Ω–æ–ø–∫–∞ logout –≤ header

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### lib/api.ts

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π API –∫–ª–∏–µ–Ω—Ç —Å interceptors –¥–ª—è:
- –î–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –∫–æ –≤—Å–µ–º –∑–∞–ø—Ä–æ—Å–∞–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ 401
- –û–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

### lib/auth.ts

–£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π:
- `login()` - –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `register()` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `logout()` - –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- `getCurrentUser()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –†–∞–±–æ—Ç–∞ —Å —Ç–æ–∫–µ–Ω–∞–º–∏ –≤ localStorage

### –ü–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

- `/login` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
- `/register` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `/documents` - —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1. Backend

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker Compose
docker-compose up -d

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Backend
cd backend
uvicorn app.main:app --reload
```

Backend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞: `http://localhost:8000`

### 2. Frontend

–°–æ–∑–¥–∞–π—Ç–µ `.env.local`:
```bash
NEXT_PUBLIC_API_URL=http://localhost:8000
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
npm run dev
```

Frontend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞: `http://localhost:3000`

## üìã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### –ü—Ä–∏–º–µ—Ä: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```typescript
import { login } from '@/lib/auth'

const handleLogin = async (email: string, password: string) => {
  try {
    await login(email, password)
    // –¢–æ–∫–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
    router.push('/documents')
  } catch (error) {
    // –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
  }
}
```

### –ü—Ä–∏–º–µ—Ä: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```typescript
import { documentsAPI } from '@/lib/api'

const loadDocuments = async () => {
  try {
    const documents = await documentsAPI.getAll({
      skip: 0,
      limit: 20,
      status: 'draft'
    })
    setDocuments(documents)
  } catch (error) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
  }
}
```

### –ü—Ä–∏–º–µ—Ä: –†–∞–±–æ—Ç–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ

```typescript
"use client"

import { useState, useEffect } from 'react'
import { documentsAPI } from '@/lib/api'

export default function DocumentsList() {
  const [docs, setDocs] = useState([])
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    loadDocs()
  }, [])

  const loadDocs = async () => {
    try {
      const data = await documentsAPI.getAll()
      setDocs(data)
    } catch (err) {
      console.error(err)
    } finally {
      setLoading(false)
    }
  }

  if (loading) return <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  return <div>{/* –†–µ–Ω–¥–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ */}</div>
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –¢–æ–∫–µ–Ω—ã

- Access Token: 15 –º–∏–Ω—É—Ç (–¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API)
- Refresh Token: 7 –¥–Ω–µ–π (–¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è access token)

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–ü—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ access token:
1. API –∫–ª–∏–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ refresh token
2. –ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ - –∑–∞–ø—Ä–æ—Å –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è
3. –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å - logout –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /login

### CORS

Backend –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ç–æ–ª—å–∫–æ —Å `http://localhost:3000`.

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ API –º–µ—Ç–æ–¥—ã

### authAPI
- `login({ email, password })` - –≤—Ö–æ–¥
- `register({ email, password, full_name, company_name, inn })` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `getCurrentUser()` - —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

### documentsAPI
- `getAll({ skip, limit, status })` - —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `getById(id)` - –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ ID
- `create(data)` - —Å–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
- `update(id, data)` - –æ–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
- `delete(id)` - —É–¥–∞–ª–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç

### partnersAPI
- `getAll()` - —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤
- `create(data)` - –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞
- `update(id, data)` - –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞
- `delete(id)` - —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞

### companiesAPI
- `getCurrentCompany()` - —Ç–µ–∫—É—â–∞—è –∫–æ–º–ø–∞–Ω–∏—è
- `update(data)` - –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–∞–Ω–∏—é

### filesAPI
- `upload(file)` - –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
- `download(fileId)` - —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
- `delete(fileId)` - —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª

### signatureAPI
- `uploadCertificate(formData)` - –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- `signDocument(documentId, password)` - –ø–æ–¥–ø–∏—Å–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
- `verifySignature(documentId)` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å—å

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### FormData –¥–ª—è —Ñ–∞–π–ª–æ–≤

–ö–æ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç–µ —Ñ–∞–π–ª—ã, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ FormData:

```typescript
const formData = new FormData()
formData.append('file', fileBlob)
formData.append('password', password)

await filesAPI.upload(formData)
```

### OAuth2 –¥–ª—è login

Backend –æ–∂–∏–¥–∞–µ—Ç OAuth2 —Ñ–æ—Ä–º–∞—Ç:

```typescript
// –ù–ï –¢–ê–ö:
// { email: "test@test.com", password: "123" }

// –¢–ê–ö:
// username: "test@test.com", password: "123"
```

–≠—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `authAPI.login()`.

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ–≥–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏:

```typescript
try {
  await apiCall()
} catch (error: any) {
  if (error.response) {
    // –û—à–∏–±–∫–∞ –æ—Ç backend
    const message = error.response.data.detail
  } else if (error.request) {
    // –ù–µ—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
  } else {
    // –î—Ä—É–≥–∞—è –æ—à–∏–±–∫–∞
  }
}
```

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
localStorage.getItem('access_token')
localStorage.getItem('refresh_token')
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API

–û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:8000/docs` (Swagger UI) –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

–û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Network –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API.

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [QUICKSTART.md](QUICKSTART.md) - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- [API_INTEGRATION.md](API_INTEGRATION.md) - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ API
- [backend/README.md](backend/README.md) - Backend –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫ API:
   - `/partners` - –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã
   - `/company` - –ø—Ä–æ—Ñ–∏–ª—å –∫–æ–º–ø–∞–Ω–∏–∏
   - `/documents/create` - —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

2. –î–æ–±–∞–≤–∏—Ç—å React Query –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å OnlyOffice –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

4. –î–æ–±–∞–≤–∏—Ç—å WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## ‚úÖ –ò—Ç–æ–≥–æ

Frontend –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ Backend API! –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, —Ç–æ–∫–µ–Ω—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞. –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.

